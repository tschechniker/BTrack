name: Publish Python 🐍 distributions 📦 to PyPI and TestPyPI

on: push

defaults:
  run:
    working-directory: modules-and-plug-ins/btrack-rt

jobs:
  build-n-publish:
    name: Build and publish Python 🐍 distributions 📦 to PyPI and TestPyPI
    runs-on: ubuntu-latest
    env:
      TWINE_USERNAME: '__token__'
      TWINE_PASSWORD: ${{ secrets.PYPI_API_TOKEN }}
    steps:
    - uses: actions/checkout@v2
    - name: build and upload manylinux wheels
      uses: ./.github/actions/action